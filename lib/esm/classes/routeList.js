var b=Object.create;var $=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var v=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+s+'" is not supported')});var C=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var L=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of H(e))!q.call(s,i)&&i!==t&&$(s,i,{get:()=>e[i],enumerable:!(r=N(e,i))||r.enumerable});return s};var M=(s,e,t)=>(t=s!=null?b(V(s)):{},L(e||!s||!s.__esModule?$(t,"default",{value:s,enumerable:!0}):t,s));var E=C((D,x)=>{x.exports=["OPTIONS","DELETE","PATCH","STATIC","POST","PUT","GET"]});import*as a from"fs";var d=(s,e)=>(e=e||[],a.readdirSync(s).forEach(r=>{if(a.statSync(s+"/"+r).isDirectory())e=d(s+"/"+r,e);else{let i=s+"/"+r;e.push(i)}}),e),A=(s,e,t)=>(t=t||[],t=d(s,t).filter(r=>r.endsWith(e)),t);var c=M(E());import*as P from"path";import*as S from"fs";var I=s=>(s=s.replace(/\/{2,}/g,"/"),s.endsWith("/")?s.slice(0,-1):s.startsWith("/")?s:`/${s}`),p=class{constructor(e,t){e=e!=null?e:[],t=t!=null?t:[],this.routes=e,this.events=t}event(e,t){return this.events.some(r=>r.event===e)?!1:this.events.push({event:e,code:t})-1}set(e,t,r){if(t=I(t),!c.default.includes(e))throw TypeError(`No Valid Request Type: ${e}
Possible Values: ${c.default.join(", ")}`);return this.routes.some(i=>i.method===e&&i.path===t)?!1:this.routes.push({method:e,path:t,pathArray:t.split("/"),code:r,data:{addTypes:!1}})-1}static(e,t,r){var m,h,T;e=I(e);let i=(m=r==null?void 0:r.preload)!=null?m:!1,n=(h=r==null?void 0:r.remHTML)!=null?h:!1,W=(T=r==null?void 0:r.addTypes)!=null?T:!0,f=[];for(let u of d(t)){let o=u.replace(t,"").replace("/",""),l=e+t.replace(o,"").replace(t,"").slice(0,-1);l.startsWith(".")&&(l=l.slice(-1)),n&&o==="index.html"?o="":n&&o.endsWith(".html")?o=o.slice(0,-5):n&&o.endsWith(".htm")&&(o=o.slice(0,-4));let y=`${l}/${o}`.endsWith("/")?`${l}`:`${l}`=="/"?`/${o}`:`${l}/${o}`,g=this.routes.push({method:"STATIC",path:y,pathArray:y.split("/"),code:async()=>{},data:{addTypes:W,file:u}});i&&(this.routes[g-1].data.content=S.readFileSync(u)),f.push(g-1)}return f}load(e){let t=A(e,".js"),r=[];for(let i of t){let n=v(P.resolve(i));if(!(!("path"in n)||!("method"in n)||!("code"in n))){if(!c.default.includes(n.method))throw TypeError(`No Valid Request Type: ${n.method}
Possible Values: ${c.default.join(", ")}`);r.push(this.routes.push({method:n.method,path:n.path,pathArray:n.path.split("/"),code:n.code,data:{addTypes:!1}}))-1}}return r}list(){return{routes:this.routes,events:this.events}}};export{p as default,I as pathParser};
