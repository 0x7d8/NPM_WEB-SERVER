var N=Object.create;var v=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var A=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,s)=>(typeof require<"u"?require:e)[s]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var C=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var L=(t,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of H(e))!q.call(t,i)&&i!==s&&v(t,i,{get:()=>e[i],enumerable:!(r=W(e,i))||r.enumerable});return t};var M=(t,e,s)=>(s=t!=null?N(V(t)):{},L(e||!t||!t.__esModule?v(s,"default",{value:t,enumerable:!0}):s,t));var I=C((D,E)=>{E.exports=["OPTIONS","DELETE","PATCH","STATIC","POST","PUT","GET"]});import*as c from"fs";var a=(t,e)=>(e=e||[],c.readdirSync(t).forEach(r=>{if(c.statSync(t+"/"+r).isDirectory())e=a(t+"/"+r,e);else{let i=t+"/"+r;e.push(i)}}),e),x=(t,e,s)=>(s=s||[],s=a(t,s).filter(r=>r.endsWith(e)),s);var l=M(I());import*as P from"path";import*as S from"fs";var u=t=>(t=t.replace(/\/{2,}/g,"/"),t.endsWith("/")&&t!=="/"?t.slice(0,-1):!t.startsWith("/")&&t!=="/"?`/${t}`:t),m=class{constructor(e,s){e=e!=null?e:[],s=s!=null?s:[],this.routes=e,this.events=s}event(e,s){return this.events.some(r=>r.event===e)?!1:this.events.push({event:e,code:s})-1}set(e,s,r){if(s=u(s),!l.default.includes(e))throw TypeError(`No Valid Request Type: ${e}
Possible Values: ${l.default.join(", ")}`);return this.routes.some(i=>i.method===e&&i.path===s)?!1:this.routes.push({method:e,path:s,pathArray:s.split("/"),code:r,data:{addTypes:!1}})-1}static(e,s,r){var f,h,T;e=u(e);let i=(f=r==null?void 0:r.preload)!=null?f:!1,n=(h=r==null?void 0:r.remHTML)!=null?h:!1,$=(T=r==null?void 0:r.addTypes)!=null?T:!0,p=[];for(let d of a(s)){let o=d.replace(s,"").replace("/",""),b=e+s.replace(o,"").replace(s,"").slice(0,-1);n&&o.endsWith("index.html")?o=o.slice(0,-10):n&&o.endsWith(".html")?o.slice(0,-5):n&&o.endsWith(".htm")&&o.slice(0,-4);let y=u(`${b}/${o}`),g=this.routes.push({method:"STATIC",path:y,pathArray:y.split("/"),code:async()=>{},data:{addTypes:$,file:d}});i&&(this.routes[g-1].data.content=S.readFileSync(d)),p.push(g-1)}return p}load(e){let s=x(e,".js"),r=[];for(let i of s){let n=A(P.resolve(i));if(!(!("path"in n)||!("method"in n)||!("code"in n))){if(!l.default.includes(n.method))throw TypeError(`No Valid Request Type: ${n.method}
Possible Values: ${l.default.join(", ")}`);r.push(this.routes.push({method:n.method,path:n.path,pathArray:n.path.split("/"),code:n.code,data:{addTypes:!1}}))-1}}return r}list(){return{routes:this.routes,events:this.events}}};export{m as default,u as pathParser};
