var $=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+s+'" is not supported')});import*as d from"fs";var c=(s,e)=>(e=e||[],d.readdirSync(s).forEach(r=>{if(d.statSync(`${s}/${r}`).isDirectory())e=c(`${s}/${r}`,e);else{let i=`${s}/${r}`;e.push(i)}}),e),A=(s,e,t)=>(t=t||[],t=c(s,t).filter(r=>r.endsWith(e)),t);var a=["OPTIONS","DELETE","PATCH","STATIC","HEAD","POST","PUT","GET"];import*as b from"path";import*as v from"fs";var o=(s,e)=>(s=s.replace(/\/{2,}/g,"/"),s.endsWith("/")&&s!=="/"?s.slice(0,-1):!s.startsWith("/")&&s!=="/"?`/${s}`:s.includes("/?")?s.replace("/?","?"):e&&s==="/"?"":s),u=class{constructor(e,t){e=e!=null?e:[],t=t!=null?t:[],this.routes=e,this.events=t}event(e,t){return this.events.some(r=>r.event===e)?!1:this.events.push({event:e,code:t})-1}set(e,t,r){if(t=o(t),!a.includes(e))throw TypeError(`No Valid Request Type: ${e}, Possible Values: ${a.join(", ")}`);return this.routes.some(i=>i.method===e&&i.path===t)?!1:this.routes.push({method:e,path:t,pathArray:t.split("/"),code:r,data:{addTypes:!1}})-1}setBlock(e,t){e=o(e);let r=[];for(let i=0;i<=t.length-1;i++){let n=t[i];r.push(this.routes.push({method:n.method,path:`${e}${o(n.path,!0)}`,pathArray:`${e}${o(n.path,!0)}`.split("/"),code:n.code,data:{addTypes:!1}})-1)}return r}setRedirects(e){let t=[];for(let r=0;r<=e.length-1;r++){let i=e[r];t.push(this.routes.push({method:i.method,path:o(i.path),pathArray:o(i.path,!0).split("/"),code:async n=>n.redirect(i.destination),data:{addTypes:!1}})-1)}return t}static(e,t,r){var m,f,y;e=o(e);let i=(m=r==null?void 0:r.preload)!=null?m:!1,n=(f=r==null?void 0:r.remHTML)!=null?f:!1,x=(y=r==null?void 0:r.addTypes)!=null?y:!0,h=[];for(let l of c(t)){let p=l.replace(t,"");n&&(p=p.replace("/index.html","/").replace(".html",""));let T=o(p),g=this.routes.push({method:"STATIC",path:T,pathArray:T.split("/"),code:async()=>{},data:{addTypes:x,file:l}});i&&(this.routes[g-1].data.content=v.readFileSync(l)),h.push(g-1)}return h}load(e){let t=A(e,".js"),r=[];for(let i of t){let n=$(b.resolve(i));if(!(!("path"in n)||!("method"in n)||!("code"in n))){if(!a.includes(n.method))throw TypeError(`No Valid Request Type: ${n.method}, Possible Values: ${a.join(", ")}`);r.push(this.routes.push({method:n.method,path:o(n.path),pathArray:o(n.path).split("/"),code:n.code,data:{addTypes:!1}})-1)}}return r}list(){return{routes:this.routes,events:this.events}}};export{u as default,o as pathParser};
