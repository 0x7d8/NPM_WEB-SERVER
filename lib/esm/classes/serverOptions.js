var S=Object.create;var A=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var L=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var $=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var j=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of M(e))!R.call(t,n)&&n!==r&&A(t,n,{get:()=>e[n],enumerable:!(s=V(e,n))||s.enumerable});return t};var B=(t,e,r)=>(r=t!=null?S(P(t)):{},j(e||!t||!t.__esModule?A(r,"default",{value:t,enumerable:!0}):r,t));var E=$((q,w)=>{w.exports=["OPTIONS","DELETE","PATCH","STATIC","POST","PUT","GET"]});import*as d from"fs";var m=(t,e)=>(e=e||[],d.readdirSync(t).forEach(s=>{if(d.statSync(t+"/"+s).isDirectory())e=m(t+"/"+s,e);else{let n=t+"/"+s;e.push(n)}}),e),v=(t,e,r)=>(r=r||[],r=m(t,r).filter(s=>s.endsWith(e)),r);var c=B(E());import*as I from"path";import*as O from"fs";var l=t=>(t=t.replace(/\/{2,}/g,"/"),t.endsWith("/")&&t!=="/"?t.slice(0,-1):!t.startsWith("/")&&t!=="/"?`/${t}`:t),p=class{constructor(e,r){e=e!=null?e:[],r=r!=null?r:[],this.routes=e,this.events=r}event(e,r){return this.events.some(s=>s.event===e)?!1:this.events.push({event:e,code:r})-1}set(e,r,s){if(r=l(r),!c.default.includes(e))throw TypeError(`No Valid Request Type: ${e}
Possible Values: ${c.default.join(", ")}`);return this.routes.some(n=>n.method===e&&n.path===r)?!1:this.routes.push({method:e,path:r,pathArray:r.split("/"),code:s,data:{addTypes:!1}})-1}static(e,r,s){var y,b,g;e=l(e);let n=(y=s==null?void 0:s.preload)!=null?y:!1,o=(b=s==null?void 0:s.remHTML)!=null?b:!1,a=(g=s==null?void 0:s.addTypes)!=null?g:!0,i=[];for(let u of m(r)){let f=u.replace(r,"");o&&(f=f.replace("/index.html","/").replace(".html",""));let T=l(f),x=this.routes.push({method:"STATIC",path:T,pathArray:T.split("/"),code:async()=>{},data:{addTypes:a,file:u}});n&&(this.routes[x-1].data.content=O.readFileSync(u)),i.push(x-1)}return i}load(e){let r=v(e,".js"),s=[];for(let n of r){let o=L(I.resolve(n));if(!(!("path"in o)||!("method"in o)||!("code"in o))){if(!c.default.includes(o.method))throw TypeError(`No Valid Request Type: ${o.method}
Possible Values: ${c.default.join(", ")}`);s.push(this.routes.push({method:o.method,path:l(o.path),pathArray:l(o.path).split("/"),code:o.code,data:{addTypes:!1}})-1)}}return s}list(){return{routes:this.routes,events:this.events}}};var h=class{constructor(e){this.data=this.mergeOptions({routes:new p,rateLimits:{enabled:!1,message:"Rate Limited",list:[],functions:new Map},dashboard:{enabled:!1,path:"/rjweb-dashboard"},bind:"0.0.0.0",proxy:!1,cors:!1,port:2023,maxBody:5,poweredBy:!0},e)}mergeOptions(...e){let r=s=>s&&typeof s=="object";return e.reduce((s,n)=>(Object.keys(n).forEach(o=>{let a=s[o],i=n[o];Array.isArray(a)&&Array.isArray(i)?s[o]=a.concat(...i):r(a)&&r(i)?s[o]=this.mergeOptions(a,i):s[o]=i}),s),{})}getOptions(){return this.data}};export{h as default};
