var f=Object.create;var p=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var y=(e,s)=>{for(var r in s)p(e,r,{get:s[r],enumerable:!0})},c=(e,s,r,t)=>{if(s&&typeof s=="object"||typeof s=="function")for(let n of u(s))!b.call(e,n)&&n!==r&&p(e,n,{get:()=>s[n],enumerable:!(t=g(s,n))||t.enumerable});return e};var z=(e,s,r)=>(r=e!=null?f(C(e)):{},c(s||!e||!e.__esModule?p(r,"default",{value:e,enumerable:!0}):r,e)),h=e=>c(p({},"__esModule",{value:!0}),e);var R={};y(R,{default:()=>l});module.exports=h(R);var d=require("stream"),o=z(require("zlib")),a={gzip:"gzip",brotli:"br",deflate:"deflate",none:"none"},i=class extends d.PassThrough{};function m(e){switch(e){case"gzip":return o.createGzip();case"brotli":return o.createBrotliCompress();case"deflate":return o.createDeflate();default:return new i}}function l(e,s,r){if(!s.compressed&&!e.rawRes.headersSent&&String(e.headers.get("accept-encoding")).includes(a[r.compression])){e.rawRes.setHeader("Content-Encoding",a[r.compression]),e.rawRes.setHeader("Vary","Accept-Encoding");let t=m(r.compression);t.pipe(e.rawRes),t.end(s.content,"binary")}else e.rawRes.end(s.content,"binary")}0&&(module.exports={});
