var y=Object.create;var i=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var I=(t,r)=>{for(var e in r)i(t,e,{get:r[e],enumerable:!0})},p=(t,r,e,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of $(r))!q.call(t,s)&&s!==e&&i(t,s,{get:()=>r[s],enumerable:!(u=b(r,s))||u.enumerable});return t};var d=(t,r,e)=>(e=t!=null?y(A(t)):{},p(r||!t||!t.__esModule?i(e,"default",{value:t,enumerable:!0}):e,t)),R=t=>p(i({},"__esModule",{value:!0}),t);var C={};I(C,{default:()=>l});module.exports=R(C);var a=(t,r)=>(t=t.replace(/\/{2,}/g,"/"),t.endsWith("/")&&t!=="/"?t.slice(0,-1):!t.startsWith("/")&&t!=="/"?`/${t}`:t.includes("/?")?t.replace("/?","?"):r&&t==="/"?"":t);var m=d(require("fs/promises")),h=d(require("os")),w=h.cpus().length;async function l(t,r,e,u,s){switch(t.url.path.replace(a(u.dashboard.path,!1),"")||"/"){case"/":let c=(await m.readFile(`${__dirname}/stats/index.html`,"utf8")).replaceAll("/rjweb-dashboard",a(u.dashboard.path));return t.print(c);case"/stats":let o=new Date,f=o.getTime(),v=process.cpuUsage(),g=await new Promise(H=>setTimeout(()=>{let n=process.cpuUsage(v),T=(new Date().getTime()-f)*5*w;H((n.system+n.user)/T)},500));return t.print({requests:[r.requests.total,{hour:e.previousHours[0],amount:r.requests[e.previousHours[0]]},{hour:e.previousHours[1],amount:r.requests[e.previousHours[1]]},{hour:e.previousHours[2],amount:r.requests[e.previousHours[2]]},{hour:e.previousHours[3],amount:r.requests[e.previousHours[3]]},{hour:e.previousHours[4],amount:r.requests[e.previousHours[4]]}],data:{incoming:[r.data.incoming.total,{hour:e.previousHours[0],amount:r.data.incoming[e.previousHours[0]]},{hour:e.previousHours[1],amount:r.data.incoming[e.previousHours[1]]},{hour:e.previousHours[2],amount:r.data.incoming[e.previousHours[2]]},{hour:e.previousHours[3],amount:r.data.incoming[e.previousHours[3]]},{hour:e.previousHours[4],amount:r.data.incoming[e.previousHours[4]]}],outgoing:[r.data.outgoing.total,{hour:e.previousHours[0],amount:r.data.outgoing[e.previousHours[0]]},{hour:e.previousHours[1],amount:r.data.outgoing[e.previousHours[1]]},{hour:e.previousHours[2],amount:r.data.outgoing[e.previousHours[2]]},{hour:e.previousHours[3],amount:r.data.outgoing[e.previousHours[3]]},{hour:e.previousHours[4],amount:r.data.outgoing[e.previousHours[4]]}]},cpu:{time:`${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}`,usage:g.toFixed(2)},memory:{time:`${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}`,usage:(process.memoryUsage().heapUsed/1e3/1e3).toFixed(2)},routes:s,cached:r.cache.files.objectCount()+r.cache.routes.objectCount()})}}0&&(module.exports={});
